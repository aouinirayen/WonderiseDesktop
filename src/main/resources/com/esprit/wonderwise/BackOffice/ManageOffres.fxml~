<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.text.Text?>

<ScrollPane fitToWidth="true" styleClass="main-scroll-pane" xmlns="http://javafx.com/javafx/8.0.171" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.esprit.wonderwise.Controller.BackOffice.ManageOffresController">
    <content>
        <VBox spacing="20" prefWidth="1200" stylesheets="@ManageOffres.css">

            <!-- Header with title and add button -->
            <HBox styleClass="header-container" alignment="CENTER">
                <HBox alignment="CENTER_LEFT" HBox.hgrow="ALWAYS">
                    <Label styleClass="page-title" text="Gestion des Offres" />
                </HBox>
                <HBox alignment="CENTER">
                    <padding>
                        <Insets right="100.0" />
                    </padding>
                    <Button fx:id="addButton" text="Ajouter une offre" styleClass="button-add" onAction="#openAddOffreForm">
                        <graphic>
                            <ImageView fitHeight="16" fitWidth="16">
                                <image>
                                    <Image url="@../icons/add.png" />
                                </image>
                            </ImageView>
                        </graphic>
                    </Button>
                </HBox>
            </HBox>

            <!-- Statistics Dashboard -->
            <HBox styleClass="stats-container" spacing="20" alignment="CENTER">
                <VBox styleClass="stats-card" alignment="CENTER">
                    <Label styleClass="stats-title" text="Total des offres" />
                    <Label fx:id="totalOffresLabel" styleClass="stats-value" text="0" />
                </VBox>
                <VBox styleClass="stats-card" alignment="CENTER">
                    <Label styleClass="stats-title" text="Prix moyen" />
                    <Label fx:id="prixMoyenLabel" styleClass="stats-value" text="0 DT" />
                </VBox>
                <StackPane styleClass="stats-card" fx:id="pieChartContainer" prefWidth="180" prefHeight="150" maxWidth="180" maxHeight="150" minWidth="180" minHeight="150">
                    <!-- PieChart will be added here programmatically -->
                </StackPane>
            </HBox>

            <!-- Scrollable content area -->
            <ScrollPane VBox.vgrow="ALWAYS" styleClass="offers-scroll-pane" fitToWidth="true" prefHeight="500.0" maxHeight="500.0">
                <content>
                    <VBox fx:id="offresContainer" styleClass="offers-container" spacing="10">
                        <!-- Cards will be added dynamically here -->
                    </VBox>
                </content>
            </ScrollPane>

            <!-- Empty state displayed when no offers exist -->
            <VBox fx:id="emptyState" styleClass="empty-state" alignment="CENTER" visible="false" managed="false">
                <ImageView fitHeight="100" fitWidth="100" preserveRatio="true">
                    <image>
                        <Image url="@../icons/empty-list.png" />
                    </image>
                </ImageView>
                <Label styleClass="empty-state-text" text="Aucune offre disponible" />
                <Button text="Ajouter une offre" styleClass="button-add" onAction="#openAddOffreForm" />
            </VBox>
        </VBox>
    </content>
</ScrollPane>