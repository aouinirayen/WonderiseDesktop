<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.ProgressIndicator?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.shape.SVGPath?>
<?import javafx.geometry.Insets?>

<VBox alignment="TOP_CENTER" spacing="20" stylesheets="@Packages.css,@FrontOffice.css" xmlns="http://javafx.com/javafx/8.0.171" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.esprit.wonderwise.Controller.FrontOffice.PackagesController">
    <ScrollPane fitToWidth="true" styleClass="main-scroll-pane">
        <VBox alignment="TOP_CENTER" spacing="20">
            <!-- Title -->
            <HBox styleClass="section-title-container" alignment="CENTER">
                <Label styleClass="section-title" text="Nos Offres de Voyage" />
            </HBox>

            <!-- Search Container with Background -->
            <VBox alignment="CENTER" styleClass="search-section">
                <HBox alignment="CENTER" styleClass="search-container">
                    <HBox alignment="CENTER" styleClass="search-box">
                        <TextField fx:id="searchField" promptText="Rechercher votre prochaine destination..." styleClass="search-field" />
                        <HBox styleClass="search-icon-container">
                            <SVGPath content="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" 
                                 styleClass="search-icon"/>
                        </HBox>
                    </HBox>
                </HBox>
            </VBox>

            <!-- Loading Indicator -->
            <StackPane fx:id="loadingPane" styleClass="loading-indicator">
                <ProgressIndicator />
                <Label text="Chargement des offres..." styleClass="loading-text" />
            </StackPane>
            
            <!-- Empty State -->
            <VBox fx:id="emptyState" styleClass="empty-state" visible="false" managed="false">
                <SVGPath content="M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 14a1 1 0 100 2 1 1 0 000-2zm0-9a1 1 0 00-1 1v5a1 1 0 102 0V8a1 1 0 00-1-1z" styleClass="empty-state-icon" />
                <Label text="Aucune offre disponible pour le moment" styleClass="empty-state-text" />
            </VBox>

            <StackPane VBox.vgrow="ALWAYS">
                <FlowPane fx:id="offersPane" hgap="30" vgap="30" alignment="TOP_CENTER" styleClass="offers-container">
                    <!-- Les cartes seront ajoutées dynamiquement via le contrôleur -->
                </FlowPane>

                <ScrollPane fx:id="detailsScrollPane" visible="false" fitToWidth="true" styleClass="details-scroll-pane">
                    <BorderPane styleClass="details-border-pane">
                        <top>
                            <HBox styleClass="back-button-container" BorderPane.alignment="CENTER_LEFT">
                                <Button styleClass="back-button" text="← Retour aux offres" onAction="#hideDetails" />
                            </HBox>
                        </top>
                        <center>
                            <fx:include fx:id="offerDetails" source="OfferDetails.fxml" />
                        </center>
                    </BorderPane>
                </ScrollPane>
            </StackPane>
        </VBox>
    </ScrollPane>
</VBox>